{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{logsAPI}from'../services/api';import{clearAuthTokens}from'../utils/auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LogList=()=>{const navigate=useNavigate();const[logs,setLogs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{fetchLogs();},[]);const fetchLogs=async()=>{try{const response=await logsAPI.list();setLogs(response.results||response);setError('');}catch(err){var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){clearAuthTokens();navigate('/login');}else{setError('Failed to load logs. Please try again.');}}finally{setLoading(false);}};const handleLogout=()=>{clearAuthTokens();navigate('/login');};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString();};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading logs...\"})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Driver's Daily Logs\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate('/logs/new'),style:{marginRight:'10px'},children:\"New Log\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleLogout,children:\"Logout\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),logs.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No logs found. Create your first daily log!\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Start Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"End Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Carrier\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Vehicle ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Miles\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Driving Hours\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:logs.map(log=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:formatDate(log.date)}),/*#__PURE__*/_jsx(\"td\",{children:log.start_location}),/*#__PURE__*/_jsx(\"td\",{children:log.end_location}),/*#__PURE__*/_jsx(\"td\",{children:log.carrier_name}),/*#__PURE__*/_jsx(\"td\",{children:log.vehicle_id}),/*#__PURE__*/_jsx(\"td\",{children:log.total_miles}),/*#__PURE__*/_jsx(\"td\",{children:log.total_driving_hours||0}),/*#__PURE__*/_jsx(\"td\",{children:log.is_submitted?/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-success\",children:\"Submitted\"}):/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-warning\",children:\"Draft\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",style:{padding:'5px 10px',fontSize:'14px'},onClick:()=>navigate(\"/logs/\".concat(log.id)),children:\"View\"})})]},log.id))})]})})]});};export default LogList;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","logsAPI","clearAuthTokens","jsx","_jsx","jsxs","_jsxs","LogList","navigate","logs","setLogs","loading","setLoading","error","setError","fetchLogs","response","list","results","err","_err$response","status","handleLogout","formatDate","dateString","Date","toLocaleDateString","className","children","style","display","justifyContent","alignItems","marginBottom","onClick","marginRight","length","map","log","date","start_location","end_location","carrier_name","vehicle_id","total_miles","total_driving_hours","is_submitted","padding","fontSize","concat","id"],"sources":["C:/Users/HomePC/Desktop/router_tracker/frontend/src/components/LogList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { logsAPI } from '../services/api';\r\nimport { clearAuthTokens } from '../utils/auth';\r\n\r\nconst LogList = () => {\r\n  const navigate = useNavigate();\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchLogs();\r\n  }, []);\r\n\r\n  const fetchLogs = async () => {\r\n    try {\r\n      const response = await logsAPI.list();\r\n      setLogs(response.results || response);\r\n      setError('');\r\n    } catch (err) {\r\n      if (err.response?.status === 401) {\r\n        clearAuthTokens();\r\n        navigate('/login');\r\n      } else {\r\n        setError('Failed to load logs. Please try again.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    clearAuthTokens();\r\n    navigate('/login');\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString();\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"card\">\r\n          <p>Loading logs...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n        <h1>Driver's Daily Logs</h1>\r\n        <div>\r\n          <button className=\"btn btn-primary\" onClick={() => navigate('/logs/new')} style={{ marginRight: '10px' }}>\r\n            New Log\r\n          </button>\r\n          <button className=\"btn btn-secondary\" onClick={handleLogout}>\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n\r\n      {logs.length === 0 ? (\r\n        <div className=\"card\">\r\n          <p>No logs found. Create your first daily log!</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"card\">\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Date</th>\r\n                <th>Start Location</th>\r\n                <th>End Location</th>\r\n                <th>Carrier</th>\r\n                <th>Vehicle ID</th>\r\n                <th>Total Miles</th>\r\n                <th>Driving Hours</th>\r\n                <th>Status</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {logs.map((log) => (\r\n                <tr key={log.id}>\r\n                  <td>{formatDate(log.date)}</td>\r\n                  <td>{log.start_location}</td>\r\n                  <td>{log.end_location}</td>\r\n                  <td>{log.carrier_name}</td>\r\n                  <td>{log.vehicle_id}</td>\r\n                  <td>{log.total_miles}</td>\r\n                  <td>{log.total_driving_hours || 0}</td>\r\n                  <td>\r\n                    {log.is_submitted ? (\r\n                      <span className=\"badge badge-success\">Submitted</span>\r\n                    ) : (\r\n                      <span className=\"badge badge-warning\">Draft</span>\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-primary\"\r\n                      style={{ padding: '5px 10px', fontSize: '14px' }}\r\n                      onClick={() => navigate(`/logs/${log.id}`)}\r\n                    >\r\n                      View\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LogList;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}